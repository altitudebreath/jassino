var Jassino=function(){function r(a){if(v(a)){var b="";for(var c in a)b+=c+"::"+r(a[c])+"\n";return b}return a.toString()}function s(a){function b(b,c){this.message=(a?a+": ":"")+(c||"DATA:")+" ==> "+r(b)}return b.prototype=new Error,b.prototype.constructor=b,b}function t(a,b,c){return Array.prototype.slice.call(a,b,c)}function u(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"}function v(a){return u("Object",a)&&a}function w(a){return a?a.split(/\s*,\s*/):[]}function x(a,b,c){a[c]!==b&&a!==b&&(a[c]=b)}function y(a,b){for(var c in b)x(a,b[c],c);return a}function z(a,b){for(var c=0;c<b.length;c++)y(a,b[c])}function A(f,g,h){var i=function(a){x(f,function(){return this[a]},j+a),x(f,function(b){this[a]=b},k+a)};for(var l in g){var n=l.slice(0,c);if(n.toLowerCase()===d){if(!h)throw new m.MembersError(g,"Trait cannot have class (static) members");x(h,g[l],l.slice(c))}else if(n.toLowerCase()===e){var o=l.slice(c);x(f,g[l],o),i(o)}else l!==a&&l!==b&&x(f,g[l],l)}}function B(a){var b,c=m.ArgumentsError,d=0,e=a.length;if(e<2)throw new c(a,"Specify at least name and body");if(v(a[0]))d++,b=a[0];else{if(!a[0]||!u(p,a[0]))throw new c(a,"First argument should be namespace or name");b=m.NS}var f={body:a[e-1],ns:b,name:a[d]},g=e-(d+1)-1;if(!f.name||!u(p,f.name))throw new c(f,"Invalid name");if(g>0){var h=" -> Parameters SHOULD BE: ([namespace,] name, [class,] [traits_array,] body)",i=a[d+1];if(g==2){var j=a[d+2];if(!u(o,i)||!u(q,j))throw new c(f,"Super traits and/or super class are invalid:"+i+","+j+h);f.sclass=i,f.straits=j}else{if(g!=1)throw new c(f,"too many parameters");if(u(o,i))f.sclass=i;else{if(!u(q,i))throw new c(f,"Class or traits array is invalid: "+i+h);f.straits=i}}}return f}function C(a,b){if(typeof a.ns[a.name]!==n)throw new m.DuplicationError(a);a.ns[a.name]=b}var a="_",b="$",c=3,d="c__",e="p__",f="##",g="__name__",h="__super__",i="do",j="get_",k="set_",l="__jassino__",m={NS:{},DuplicationError:s("Duplication"),ArgumentsError:s("Arguments"),ConstructorError:s("Constructor"),InstantiationError:s("Instantiation"),MembersError:s("Members"),use_global_scope:function(a){var b=a||window;this.NS=b,b.Class=this.Class,b.Trait=this.Trait}},n="undefined",o="Function",p="String",q="Array";return m.Trait=function(){var a=B(arguments),b={};return C(a,b),a.straits&&z(b,a.straits),A(b,a.body),b},m.Class=function(){var c=B(arguments),d=c.body,e=c.sclass,j=d[a],k,n=function(){throw new m.InstantiationError({},'use "new": new ClassA()')};if(!j)k=e?function(){this[l]||n(),e.apply(this,arguments)}:function(){this[l]||n()};else if(u(o,j))k=function(){this[l]||n();try{j.apply(this,arguments)}catch(a){throw new m.ConstructorError(a.message,"Probably recursive call from inside of constructor to itself (Did you meant super call?)")}};else{if(!u(p,j))throw new m.ConstructorError(j,"Invalid constructor");var q=j.split(new RegExp("\\s*"+f+"\\s*"));if(q.length===1){if(e)throw new m.ConstructorError(q[0],"_: 'arg,...' assumes NO SuperClass");k=function(){this[l]||n();var a=w(q[0]);for(var b=0;b<a.length;b++)this[a[b]]=arguments[b]}}else{if(q.length!==2)throw new m.ConstructorError(j,"Invalid number of separators in super/constructor shortcut");if(!e)throw new m.ConstructorError(j,"_: 'super_arg1,..."+f+" arg1,...' assumes SuperClass presence");var r=w(q[1]);k=function(){var a=arguments.length-r.length;this[l]||n(),e.apply(this,t(arguments,0,a));for(var b=0;b<r.length;b++)this[r[b]]=arguments[a+b]}}}C(c,k);if(e){var s=d[b]||e[g],v=function(){};v.prototype=e.prototype,k.prototype=new v,k.prototype.constructor=k;var x=function(){e.apply(this,arguments)};x[i]=function(a){return e.prototype[a].apply(this,t(arguments,1))},k.prototype[s]=x,y(k,e),k[h]=e}return c.straits&&z(k.prototype,c.straits),A(k.prototype,d,k),k[g]=c.name,k.prototype[l]=!0,k},m}();