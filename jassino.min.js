var Jassino=function(){function q(a){if(u(a)){var b="";for(var c in a)b+=c+"::"+q(a[c])+"\n";return b}return a.toString()}function r(a){function b(b,c){this.message=(a?a+": ":"")+(c||"DATA:")+" ==> "+q(b)}return b.prototype=new Error,b.prototype.constructor=b,b}function s(a,b,c){return Array.prototype.slice.call(a,b,c)}function t(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"}function u(a){return t("Object",a)&&a}function v(a){return a?a.split(/\s*,\s*/):[]}function w(a,b,c){a[c]!==b&&a!==b&&(a[c]=b)}function x(a,b){for(var c in b)w(a,b[c],c);return a}function y(a,b){for(var c=0;c<b.length;c++)x(a,b[c])}function z(f,g,h){var k=function(a){w(f,function(){return this[a]},i+a),w(f,function(b){this[a]=b},j+a)};for(var m in g){var n=m.slice(0,c);if(n.toLowerCase()===d){if(!h)throw new l.MembersError(g,"Trait cannot have class (static) members");w(h,g[m],m.slice(c))}else if(n.toLowerCase()===e){var o=m.slice(c);w(f,g[m],o),k(o)}else m!==a&&m!==b&&w(f,g[m],m)}}function A(a){var b,c=l.ArgumentsError,d=0,e=a.length;if(e<2)throw new c(a,"Specify at least name and body");if(u(a[0]))d++,b=a[0];else{if(!a[0]||!t(o,a[0]))throw new c(a,"First argument should be namespace or name");b=l.NS}var f={body:a[e-1],ns:b,name:a[d]},g=e-(d+1)-1;if(!f.name||!t(o,f.name))throw new c(f,"Invalid name");if(g>0){var h="Parameters SHOULD BE: ([namespace,] name, [class,] [traits_array,] body)",i=a[d+1];if(g==2){var j=a[d+2];if(!t(n,i)||!t(p,j))throw new c(f,h);f.sclass=i,f.straits=j}else{if(g!=1)throw new c(f,"too many parameters");if(t(n,i))f.sclass=i;else{if(!t(p,i))throw new c(f,h);f.straits=i}}}return f}function B(a,b){if(typeof a.ns[a.name]!==m)throw new l.DuplicationError(a);a.ns[a.name]=b}var a="_",b="$",c=3,d="c__",e="p__",f="__name",g="__super",h="m__",i="get_",j="set_",k="__jassino__",l={NS:{},DuplicationError:r("Duplication"),ArgumentsError:r("Arguments"),ConstructorError:r("Constructor"),InstantiationError:r("Instantiation"),MembersError:r("Members"),use_global_scope:function(a){var b=a||window;this.NS=b,b.Class=this.Class,b.Trait=this.Trait}},m="undefined",n="Function",o="String",p="Array";return l.Trait=function(){var a=A(arguments),b={};return B(a,b),a.straits&&y(b,a.straits),z(b,a.body),b},l.Class=function(){var c=A(arguments),d=c.body,e=c.sclass,i=d[a],j,m=function(){throw new l.InstantiationError({},'use "new": new ClassA()')};if(!i)j=e?function(){this[k]||m(),e.apply(this,arguments)}:function(){this[k]||m()};else if(t(n,i))j=function(){this[k]||m();try{i.apply(this,arguments)}catch(a){throw new l.ConstructorError(a.message,"Probably recursive call from inside of constructor to itself (Did you meant super call?)")}};else if(t(o,i)){if(e)throw new l.ConstructorError(i,"_: 'arg,...' assumes NO SuperClass");j=function(){this[k]||m();var a=v(i);for(var b=0;b<a.length;b++)this[a[b]]=arguments[b]}}else{if(!(t(p,i)&&i.length===2&&t(o,i[0])&&t(o,i[1])))throw new l.ConstructorError(i,"Invalid constructor");if(!e)throw new l.ConstructorError(i,"_: ['super_arg1,...', 'arg1,...'] assumes SuperClass");var q=v(i[0]).length,r=v(i[1]);j=function(){this[k]||m(),e.apply(this,s(arguments,0,q));for(var a=0;a<r.length;a++)this[r[a]]=arguments[q+a]}}B(c,j);if(e){var u=d[b]||e[f],w=function(){};w.prototype=e.prototype,j.prototype=new w,j.prototype.constructor=j,j.prototype[u]=function(){e.apply(this,arguments)},j.prototype[h+u]=function(a){return e.prototype[a].apply(this,s(arguments,1))},x(j,e),j[g]=e}return c.straits&&y(j.prototype,c.straits),z(j.prototype,d,j),j[f]=c.name,j.prototype[k]=!0,j},l}();