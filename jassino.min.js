"use strict";var Jassino=function(n){function r(n){if(s(n)){var t="";for(var e in n)t+=e+"::"+r(n[e])+"\n";return t}return String(n)}function t(n){console.log(n);var r="\n";for(var t in n)r+=t+": "+String(n[t])+"\n";return r}function e(n){function e(e,o,s){this.message=(n?n+": ":"\n")+(o||"DATA:")+" ==> \n"+r(e)+"\n"+(s?t(s):"")}return e.prototype=new Error,e.prototype.constructor=e,e}function o(n,r,t){return Array.prototype.slice.call(n,r,t)}function s(n){return"[object Object]"===Object.prototype.toString.call(n)&&n}function i(n){return"[object Array]"===Object.prototype.toString.call(n)}function a(n){return n?n.split(/\s*,\s*/):[]}function u(n,r,t){if(n===r)throw Error("Recursive assignment destination[fieldName] = destination! \n"+JSON.stringify(n)+"\n   fieldName: "+t);n[t]=r}function f(n,r){for(var t in r)if(r.hasOwnProperty(t)){var e=r[t];if(n===e)throw Error("Recursive assignment destination[fieldName] = destination! \n"+JSON.stringify(n)+"\n   fieldName: "+t);n[t]=e}return n}function c(n,r){for(var t=0;t<r.length;t++)f(n,r[t])}function l(n,r){return function(){var t=o(arguments);return t.unshift(n),r.apply(this,t)}}function p(r,t,e){for(var o in t)if(t.hasOwnProperty(o)){if(o===h||o===w)continue;var s=t[o];if(!i(s)||s[0]!==n.Class.STATIC&&s[0]!==n.Class.CLS)u(r,s,o);else if(s[0]===n.Class.STATIC){if(typeof e!==S)throw new n.MembersError(t,"Mixin cannot have class (static) members");typeof s[1]===S?u(e,l(e,s[1]),o):u(e,s[1],o)}else u(r,l(e,s[1]),o)}}function m(r){var t,e=n.ArgumentsError,o=0,a=r.length;if(2>a)throw new e(r,"Specify at least name and body");if(s(r[0]))o++,t=r[0];else{if(!r[0]||typeof r[0]!==E)throw new e(r,"First argument should be namespace or name");t=n.NS||null}var u={body:r[a-1],ns:t,name:r[o],sclass:null,smixins:null},f=a-(o+1)-1;if(!u.name||typeof u.name!==E)throw new e(u,"Invalid name");if(f>0){var c=" -> Parameters SHOULD BE: ([namespace,] name, [class,] [mixins_array,] body)",l=r[o+1];if(2==f){var p=r[o+2];if(typeof l!==S||!i(p))throw new e(u,"Super mixins and/or super class are invalid:"+l+","+p+c);u.sclass=l,u.smixins=p}else{if(1!=f)throw new e(u,"too many parameters");if(typeof l===S)u.sclass=l;else{if(!i(l))throw new e(u,"Class or mixins array is invalid: "+l+c);u.smixins=l}}}return u}function y(r,t){if(r.ns){if(typeof r.ns[r.name]!==b)throw new n.DuplicationError(r);r.ns[r.name]=t}}var h="_",w="__",v="__name__",d="__super__",g="super",C="__jassino__";n.DuplicationError=e("Duplication"),n.ArgumentsError=e("Arguments"),n.ConstructorError=e("Constructor"),n.InstantiationError=e("Instantiation"),n.MembersError=e("Members"),n.useGlobalScope=function(r){var t=r||window;t.Class=n.Class,t.Mixin=n.Mixin,t.Jassino=n},n.setDefaultNS=function(n){return this.NS=n};var b="undefined",S="function",E="string";return n.Mixin=function(){var n=m(arguments),r={};if(y(n,r),n.smixins&&c(r,n.smixins),n.body[h])throw new AE(n,"Mixin should not contain the constructor!");return p(r,n.body),r},n.Class=function(){var r,t=m(arguments),e=t.body,s=t.sclass,i=e[h],u=e[w],l=function(){throw new n.InstantiationError({},'use "new": new ClassA()')};if(i&&"auto"!==i)if(typeof i===S)r=function(){this[C]||l();try{var r=o(arguments);r.unshift(s),i.apply(this,r)}catch(t){throw new n.ConstructorError(t.message,"\n[Hint1: Recursive call by constructor to itself ??]\n[Hint2: Need Super call ??]\n",t)}finally{}};else{if(typeof i!==E)throw new n.ConstructorError(i,"Invalid constructor");var _=a(i);if(u){if(!(u>0))throw new n.ConstructorError(u,"Invalid number of the Super constructor arguments");if(!s)throw new n.ConstructorError(i,"__: '"+u+"' assumes SuperClass presence");r=function(){this[C]||l(),s.apply(this,o(arguments,0,u));for(var n=u;n<_.length;n++)this[_[n]]=arguments[n]}}else{if(s&&typeof u===b)throw new n.ConstructorError(i,"_: '"+i+"' -- Class and SuperClass shortcut notations must be present both!");r=function(){this[C]||l();for(var n=0;n<_.length;n++)this[_[n]]=arguments[n]}}}else r=s?function(){this[C]||l(),s.apply(this,arguments)}:function(){this[C]||l()};if(y(t,r),s){s[v];r.prototype=Object.create(s.prototype),r.prototype.constructor=r,f(r,s),r.prototype[g]=function(n,r){return n[d].prototype[r].apply(this,o(arguments,2))},r[d]=s}return t.smixins&&c(r.prototype,t.smixins),p(r.prototype,e,r),r[v]=t.name,r.prototype[v]=t.name,r.prototype[C]=!0,r},n.Class.STATIC={},n.Class.CLS={},n}({});module&&(module.exports=Jassino);