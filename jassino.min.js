var Jassino=function(){function q(a){var b=a.toString();if(b=="[object Object]"){b="";for(var c in a)b+=c+"::"+a[c]+"\n"}return b}function r(a){return function(b,c){this.message=(a?a+": ":"")+(c||"DATA:")+" ==> "+q(b)}}function s(a,b,c){return Array.prototype.slice.call(a,b,c)}function t(a){return Object.prototype.toString.call(a)==="[object Array]"}function u(a,b,c){a[c]!==b&&a!==b&&(a[c]=b)}function v(a,b){for(var c in b)u(a,b[c],c);return a}function w(a,b){for(var c=0;c<b.length;c++)v(a,b[c])}function x(b,c,d){var k=function(a){u(b,function(){return this[a]},i+a),u(b,function(b){this[a]=b},j+a)};for(var m in c){var n=m.slice(0,f);if(n.toLowerCase()===g){if(!d)throw new l.MembersError(c,"Trait cannot have class (static) members");u(d,c[m],m.slice(f))}else if(n.toLowerCase()===h){var o=m.slice(f);u(b,c[m],o),k(o)}else m!==a&&m!==e&&u(b,c[m],m)}}function y(a){var b,c=l.ArgumentsError,d=0,e=a.length;if(e<2)throw new c(a,"Specify at least name and body");if(a[0]!==null&&typeof a[0]===p&&!t(a[0]))d++,b=a[0];else{if(!a[0]||typeof a[0]!==o)throw new c(a,"First argument should be namespace or name");b=l.NS}var f={body:a[e-1],ns:b,name:a[d]},g=e-(d+1)-1;if(!f.name||typeof f.name!==o)throw new c(f,"Invalid name");if(g>0){var h="Parameters between name and body: 1st - class, 2nd - traits array 1..n || one of them",i=a[d+1];if(g==2){var j=a[d+2];if(typeof i!=n||!t(j))throw new c(f,h);f.sclass=i,f.straits=j}else{if(g!=1)throw new c(f,"too many parameters");if(typeof i===n)f.sclass=i;else{if(!t(i))throw new c(f,h);f.straits=i}}}return f}function z(a,b){if(typeof a.ns[a.name]!==m)throw new l.DuplicationError(a);a.ns[a.name]=b}var a="_",b="_NAME",c="$",d="$C",e="$NAME",f=3,g="c__",h="p__",i="get_",j="set_",k="_jassino_",l={NS:{},DuplicationError:r("Duplication"),ArgumentsError:r("Arguments"),ConstructorError:r("Constructor"),InstantiationError:r("Instantiation"),MembersError:r("Members"),is_array:t},m="undefined",n="function",o="string",p="object";return l.Trait=function(){var a=y(arguments),b={};return z(a,b),a.straits&&w(b,a.straits),x(b,a.body),b},l.Class=function(){var f=y(arguments),g=f.body,h=f.sclass,i=g[a],j,m=function(){throw new l.InstantiationError({},'use "new": new ClassA()')};if(!i)j=h?function(){this[k]||m(),h.apply(this,arguments)}:function(){this[k]||m()};else if(typeof i===n)j=function(){this[k]||m();try{i.apply(this,arguments)}catch(a){throw new l.ConstructorError(a.message,"Probably recursive call from inside of constructor to itself (Did you meant super call?)")}};else{if(!t(i))throw new l.ConstructorError(i,"Invalid constructor");if(!t(i[0])){if(h)throw new l.ConstructorError(i,"_: [arg,...] assumes NO SuperClass");j=function(){this[k]||m();for(var a=0;a<i.length;a++)this[i[a]]=arguments[a]}}else{if(!h)throw new l.ConstructorError(i,"_: [[super_arg1,...], [arg1,...]] assumes SuperClass");var o=i[0].length,p=i[1];j=function(){this[k]||m(),h.apply(this,s(arguments,0,o));for(var a=0;a<p.length;a++)this[p[a]]=arguments[o+a]}}}z(f,j);if(h){var q=g[e]||h[b],r=function(){};r.prototype=h.prototype,j.prototype=new r,j.prototype.constructor=j,j.prototype[q+c]=h.prototype,j.prototype[q]=function(){h.apply(this,arguments)},v(j,h),j[d]=h,j[e]=q}return f.straits&&w(j.prototype,f.straits),x(j.prototype,g,j),j[b]=f.name,j.prototype[k]=!0,j},l}();