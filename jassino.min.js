!function(r){function t(r){if(s(r)){var n="";for(var e in r)n+=e+"::"+t(r[e])+"\n";return n}return r.toString()}function n(r){function n(n,e){this.message=(r?r+": ":"")+(e||"DATA:")+" ==> "+t(n)}return n.prototype=new Error,n.prototype.constructor=n,n}function e(r,t,n){return Array.prototype.slice.call(r,t,n)}function o(r,t){return Object.prototype.toString.call(t)==="[object "+r+"]"}function s(r){return o("Object",r)&&r}function a(r){return r?r.split(/\s*,\s*/):[]}function i(r,t,n){r[n]!==t&&r!==t&&(r[n]=t)}function u(r,t){for(var n in t)i(r,t[n],n);return r}function c(r,t){for(var n=0;n<t.length;n++)u(r,t[n])}function f(t,n,e){var o=function(r){i(t,function(){return this[r]},E+r),i(t,function(t){this[r]=t},C+r)};for(var s in n){var a=s.slice(0,w);if(a.toLowerCase()===y){if(!e)throw new r.MembersError(n,"Trait cannot have class (static) members");i(e,n[s],s.slice(w))}else if(a.toLowerCase()===g){var u=s.slice(w);i(t,n[s],u),o(u)}else s!==h&&s!==m&&i(t,n[s],s)}}function l(t){var n,e=r.ArgumentsError,a=0,i=t.length;if(2>i)throw new e(t,"Specify at least name and body");if(s(t[0]))a++,n=t[0];else{if(!t[0]||!o(I,t[0]))throw new e(t,"First argument should be namespace or name");n=r.NS}var u={body:t[i-1],ns:n,name:t[a]},c=i-(a+1)-1;if(!u.name||!o(I,u.name))throw new e(u,"Invalid name");if(c>0){var f=" -> Parameters SHOULD BE: ([namespace,] name, [class,] [traits_array,] body)",l=t[a+1];if(2==c){var p=t[a+2];if(!o(D,l)||!o(T,p))throw new e(u,"Super traits and/or super class are invalid:"+l+","+p+f);u.sclass=l,u.straits=p}else{if(1!=c)throw new e(u,"too many parameters");if(o(D,l))u.sclass=l;else{if(!o(T,l))throw new e(u,"Class or traits array is invalid: "+l+f);u.straits=l}}}return u}function p(t,n){if(typeof t.ns[t.name]!==A)throw new r.DuplicationError(t);t.ns[t.name]=n}var h="_",m="$",w=3,y="c__",g="p__",v="##",_="__name__",d="__super__",b="do",E="get_",C="set_",S="__jassino__";u(r,{NS:{},DuplicationError:n("Duplication"),ArgumentsError:n("Arguments"),ConstructorError:n("Constructor"),InstantiationError:n("Instantiation"),MembersError:n("Members"),use_global_scope:function(r){var t=r||window;this.NS=t,t.Class=this.Class,t.Trait=this.Trait}});var A="undefined",D="Function",I="String",T="Array";return r.Trait=function(){var r=l(arguments),t={};return p(r,t),r.straits&&c(t,r.straits),f(t,r.body),t},r.Class=function(){var t,n=l(arguments),s=n.body,i=n.sclass,w=s[h],y=function(){throw new r.InstantiationError({},'use "new": new ClassA()')};if(w)if(o(D,w))t=function(){this[S]||y();try{w.apply(this,arguments)}catch(t){throw new r.ConstructorError(t.message,"Probably recursive call from inside of constructor to itself (Did you meant super call?)")}};else{if(!o(I,w))throw new r.ConstructorError(w,"Invalid constructor");var g=w.split(new RegExp("\\s*"+v+"\\s*"));if(1===g.length){if(i)throw new r.ConstructorError(g[0],"_: 'arg,...' assumes NO SuperClass");t=function(){this[S]||y();for(var r=a(g[0]),t=0;t<r.length;t++)this[r[t]]=arguments[t]}}else{if(2!==g.length)throw new r.ConstructorError(w,"Invalid number of separators in super/constructor shortcut");if(!i)throw new r.ConstructorError(w,"_: 'super_arg1,..."+v+" arg1,...' assumes SuperClass presence");var E=a(g[1]);t=function(){var r=arguments.length-E.length;this[S]||y(),i.apply(this,e(arguments,0,r));for(var t=0;t<E.length;t++)this[E[t]]=arguments[r+t]}}}else t=i?function(){this[S]||y(),i.apply(this,arguments)}:function(){this[S]||y()};if(p(n,t),i){var C=s[m]||i[_],A=function(){};A.prototype=i.prototype,t.prototype=new A,t.prototype.constructor=t;var T=function(){i.apply(this,arguments)};T[b]=function(r){return i.prototype[r].apply(this,e(arguments,1))},t.prototype[C]=T,u(t,i),t[d]=i}return n.straits&&c(t.prototype,n.straits),f(t.prototype,s,t),t[_]=n.name,t.prototype[S]=!0,t},r}("undefined"==typeof module.exports?Jassino={}:module.exports);